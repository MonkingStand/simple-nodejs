<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="image/png" href="//come-future.oss-cn-beijing.aliyuncs.com/check-in/logo.png" rel="shortcut icon">
    <title>天台医共体智慧云平台</title>
    <style>
      /* reset */
      *{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}html{font-family:"Helvetica Neue",Helvetica,STHeiTi,Arial,sans-serif;height:100%;overflow-x:hidden;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{height:100%;overflow-x:hidden;margin:0;line-height:1.5;color:#333;background-color:white;height:100%;overflow-x:hidden;-webkit-overflow-scrolling:touch}body,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,menu,nav,section{margin:0;padding:0;border:0}a{background:transparent;text-decoration:none;-webkit-tap-highlight-color:transparent;color:orange}s a:active{outline:0;color:crimson}address,cite,dfn,em,i,var{font-style:normal}button{user-select:none}img{vertical-align:middle}img:not([src]),img[src=""]{opacity:0}ul,ol{list-style:none}table{border-collapse:collapse;border-spacing:0}input,select,button,textarea{font-size:100%;font:inherit}
    </style>
    <style>
      /* customization */
      /* 主界面 slogan 相关 */
      .main {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow-x: hidden;
        overflow-y: auto;
        background: #fff url(https://come-future.oss-cn-beijing.aliyuncs.com/check-in/bg.jpg) no-repeat center center / cover;
      }
      .mask {
        position: fixed;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        background-color: #0674a7;
        opacity: 0.5;
        pointer-events: none;
        z-index: 1;
      }
      .container {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        z-index: 9;
      }
      .check-in-title {
        display: flex;
        height: 5vh;
        margin-top: 25vh;
        align-items: center;
        justify-content: center;
      }
      .check-in-title img {
        height: 100%;
      }
      .check-in-sub-title {
        display: flex;
        height: 2.5vh;
        margin-top: 2.5vh;
        align-items: center;
        justify-content: center;
      }
      .check-in-sub-title img {
        height: 100%;
      }
      .check-in-date {
        display: flex;
        height: 20px;
        line-height: 20px;
        margin-top: 2.5vh;
        align-items: center;
        justify-content: center;
      }
      .check-in-date span {
        display: inline-block;
        height: 20px;
        line-height: 20px;
        padding: 0 10px;
        border-radius: 12px;
        color: #fff;
        font-size: 12px;
        background-color: #0674a7;
      }
      .slogan {
        display: flex;
        height: 4vh;
        margin-top: 7.5vh;
        align-items: center;
        justify-content: center;
      }
      .slogan img {
        height: 100%;
        padding: 0;
        margin: 0;
      }
      /* 提示下滑 */
      @keyframes move {
        25% {
            opacity: 1;
        }
        33% {
            opacity: 1;
            transform: translateY(30px);
        }
        67% {
            opacity: 1;
            transform: translateY(40px);
        }
        100% {
            opacity: 0;
            transform: translateY(55px) scale3d(0.5, 0.5, 0.5);
        }
      }
      @keyframes pulse {
          to {
              opacity: 1;
          }
      }
      .scroll-down-tips {
          position: absolute;
          display: flex;
          left: 0;
          right: 0;
          top: 85vh;
          justify-content: center;
          align-items: center;
      }
      .scroll-down-tips.hidden {
        display: none;
      }
      .scroll-down-tips .chevron {
          position: absolute;
          width: 28px;
          height: 8px;
          opacity: 0;
          transform: scale3d(0.5, 0.5, 0.5);
          animation: move 3s ease-out infinite;
      }
      .scroll-down-tips .chevron:first-child {
          animation: move 3s ease-out 1s infinite;
      }
      .scroll-down-tips .chevron:nth-child(2) {
          animation: move 3s ease-out 2s infinite;
      }
      .scroll-down-tips .chevron:before,
      .scroll-down-tips .chevron:after {
          content: ' ';
          position: absolute;
          top: 0;
          height: 100%;
          width: 51%;
          background: #fff;
      }
      .scroll-down-tips .chevron:before {
          left: 0;
          transform: skew(0deg, 30deg);
      }
      .scroll-down-tips .chevron:after {
          right: 0;
          width: 50%;
          transform: skew(0deg, -30deg);
      }
      .scroll-down-tips .text {
          display: block;
          font-family: "Helvetica Neue", "Helvetica", Arial, sans-serif;
          font-size: 13px;
          color: #fff;
          text-transform: uppercase;
          white-space: nowrap;
          opacity: .25;
          animation: pulse 2s linear alternate infinite;
      }
      /* 下滑动画 */
      @keyframes slideDown {
        0% {
          transform: translateY(0vh);
        }
        100% {
          transform: translateY(-100vh);
        }
      }
      .container.check-in {
        transform: translateY(-100vh);
        animation: slideDown 0.5s ease;
      }
      /* 签到表单 */
      .check-in-form {
        position: absolute;
        display: block;
        height: 100vh;
        top: 100vh;
        left: 0;
        right: 0;
        overflow-y: auto;
        overflow-x: hidden;
      }
      .check-in-form .form-title {
        position: absolute;
        width: auto;
        height: 32px;
        line-height: 32px;
        top: calc(17.5vh - 32px);
        left: 10vw;
        padding: 0 36px 0 10px;
        border-radius: 10px 10px 0 0;
        color: #fff;
        font-size: 14px;
        font-style: italic;
        font-weight: bold;
        background-color: #0674a7;
      }
      .check-in-form .form-title:after {
        position: absolute;
        content: "";
        width: 0px;
        height: 0px;
        top: -36px;
        right: -30px;
        border: 36px solid #666;
        border-left-color: transparent;
        border-right-color: transparent;
        border-bottom-color: #0674a7;
        border-top-color: transparent;
      }
      .check-in-form form {
        position: absolute;
        top: 17.5vh;
        left: 10vw;
        right: 10vw;
        padding: 10px;
        border-radius: 0 10px 10px 10px;
        background-color: #fff;
      }
      .check-in-form .form-item {
        margin-bottom: 15px;
      }
      .check-in-form .form-item .error-tips {
        display: none;
        height: 20px;
        line-height: 20px;
        color: #fb5531;
        font-size: 12px;
      }
      .check-in-form .form-item.error .error-tips {
        display: block;
      }
      .check-in-form .form-item label {
        display: block;
        height: 24px;
        line-height: 24px;
        font-size: 13px;
      }
      .check-in-form .form-item input,
      .check-in-form .form-item textarea {
        display: block;
        width: 100%;
        height: 30px;
        line-height: 28px;
        padding: 0 5px;
        margin: 3px 0 0 0;
        border: 1px solid #ddd;
        border-radius: 5px;;
        font-size: 13px;
      }
      .check-in-form .form-item textarea {
        height: 58px;
        resize: none;
      }
      .check-in-form .form-item input:focus,
      .check-in-form .form-item textarea:focus {
        outline: none;
        border-color: #0674a7;
      }
      /* 提交按钮 */
      #submitBtn {
        position: fixed;
        display: none;
        width: 52px;
        height: 52px;
        line-height: 52px;
        top: 101vh;
        right: 1vw;
        padding: 0;
        margin: 0;
        border-radius: 50%;
        text-align: center;
        color: #0674a7;
        font-size: 13px;
        font-weight: bold;
        background-color: #fff;
      }
      .check-in #submitBtn {
        display: block;
        z-index: 99;
      }
      /* 签到成功提示 */
      .checked-tips-dialog {
        position: fixed;
        display: none;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(255, 255, 255, 0.3);
        z-index: 99;
      }
      .checked-tips-dialog.active {
        display: block;
      }
      .checked-tips-dialog .dialog {
        position: absolute;
        height: 100px;
        left: 20vw;
        right: 20vw;
        top: 50%;
        padding: 20px 10px;
        margin-top: -100px;
        border-radius: 10px;
        overflow: hidden;
        background-color: #fff;
      }
      .checked-tips-dialog .checked-title {
        height: 20px;
        line-height: 20px;
        font-size: 16px;
        font-weight: bold;
        color: #333;
        text-align: center;
      }
      .checked-tips-dialog .checked-sub-title {
        height: 20px;
        line-height: 20px;
        margin-top: 10px;
        font-size: 14px;
        color: #aaa;
        text-align: center;
      }
      .checked-tips-dialog .close-link {
        position: absolute;
        display: flex;
        height: 28px;
        width: 28px;
        top: 50%;
        left: 50%;
        margin-left: -14px;
        margin-top: 100px;
        border-radius: 50%;
        background: #fff;
        align-items: center;
        justify-content: center;
      }
      .checked-tips-dialog .close-link:before {
        position: absolute;
        content: "";
        width: 1px;
        height: 128px;
        top: 50%;
        left: 50%;
        margin-top: -128px;
        background-color: #fff;
      }
      .checked-tips-dialog .close-link-icon {
        display: inline-block;
        width: 20px;
        height: 1px;
        background: #aaa;
        transform: rotate(45deg);
      }
      .checked-tips-dialog .close-link-icon:after {
        content: "";
        display: block;
        width: 20px;
        height: 1px;
        background: #aaa;
        transform: rotate(-90deg);
      }
    </style>
  </head>
  <body>
    <div class="main" id="main">
      <div class="mask"></div>
      <div class="container" id="container">
        <div class="check-in-title">
          <img src="https://come-future.oss-cn-beijing.aliyuncs.com/check-in/title.png"/>
        </div>
        <div class="check-in-sub-title">
          <img src="https://come-future.oss-cn-beijing.aliyuncs.com/check-in/sub-title.png"/>
        </div>
        <div class="check-in-date">
          <span>2020/11/27</span>
        </div>
        <div class="slogan">
          <img src="https://come-future.oss-cn-beijing.aliyuncs.com/check-in/slogan.png"/>
        </div>
        <div id="scrollDownTips" class="scroll-down-tips">
          <div class="chevron"></div>
          <div class="chevron"></div>
          <div class="chevron"></div>
          <span class="text">
            下滑进行签到
          </span>
        </div>
        <div class="check-in-form">
          <div class="form-title">
            发布会签到表
          </div>
          <form id="checkedForm" method="POST" action="/create-record">
            <div class="form-item">
              <label>单位（必填）</label>
              <div class="error-tips">请填写单位</div>
              <input type="text" name="company" class="form-input"/>
            </div>
            <div class="form-item">
              <label>职务（必填）</label>
              <div class="error-tips">请填写职务</div>
              <input type="text" name="job" class="form-input"/>
            </div>
            <div class="form-item">
              <label>姓名（必填）</label>
              <div class="error-tips">请填写姓名</div>
              <input type="text" name="name" class="form-input"/>
            </div>
            <div class="form-item">
              <label>电话（必填）</label>
              <div class="error-tips">请填写正确的联系电话</div>
              <input type="text" name="mobile" class="form-input"/>
            </div>
            <div class="form-item">
              <label>祝语</label>
              <textarea type="text" name="congratulation" rows="2" class="form-input"></textarea>
            </div>
          </form>
          <div id="submitBtn">
            提交
          </div>
        </div>
      </div>
    </div>
    <div id="checkedDialog" class="checked-tips-dialog">
      <div class="dialog">
        <div class="checked-title">签到成功 !</div>
        <div class="checked-sub-title">感谢您此次来访</div>
      </div>
      <div id="closeLink" class="close-link">
        <i class="close-link-icon"></i>
      </div>
    </div>
    <script type="text/javascript">
      var $main = document.getElementById('main');
      var $container = document.getElementById('container');
      // 初始化重置滚动条位置
      $main.scrollTo(0, 0);
      // 监听滚动事件
      var prev = 0;
      var current= $main.scrollTop;
      var scrolling = false;
      function slideUp() {
        // do nothing
      }
      function slideDown() {
        $container.className = 'container check-in';
      }
      $main.onscroll = function() {
        if (scrolling) return;

        scrolling = true;
        current = $main.scrollTop;
        if (current > prev) {
            slideDown()
        } else {
            slideUp();
        }
        prev = current;
      };
      // 判断用户是否提交了签到
      var submitTag = document.URL.indexOf('checked=true') !== -1;
      var $checkedDialog = document.getElementById('checkedDialog');
      var $scrollDownTips = document.getElementById('scrollDownTips');
      if (submitTag) {
        $checkedDialog.className = 'checked-tips-dialog active';
        $scrollDownTips.className = 'scroll-down-tips hidden';
      }
      // 提交表单
      var $submitBtn = document.getElementById('submitBtn');
      var $checkedForm = document.getElementById('checkedForm');
      var $inputItemArr = $checkedForm.getElementsByClassName('form-input');
      $submitBtn.onclick = function() {
        // 校验字段数据
        for (let i = 0; i < $inputItemArr.length; i++) {
          var $formInputItem = $inputItemArr[i].parentNode;
          var inputType = $inputItemArr[i].getAttribute('name');
          var inputVal = $inputItemArr[i].value;

          switch (inputType) {
            case 'mobile':
              const mobileReg = /^1(3|4|5|6|7|8|9)\d{9}$/;
              if (!mobileReg.test(inputVal.trim())) {
                $formInputItem.className = 'form-item error';
                return;
              }
            default:
              if (inputType !== 'congratulation' && !inputVal.trim()) {
                $formInputItem.className = 'form-item error';
                return;
              }
          }
        }

        $checkedForm.submit();
      };
      for (let i = 0; i < $inputItemArr.length; i++) {
        $inputItemArr[i].onfocus = function(evt) {
          $inputItem = evt.target;

          $inputItem.parentNode.className = 'form-item';
        };
      }
      // 关闭签到弹框
      var $closeLink = document.getElementById('closeLink');
      $closeLink.onclick = function() {
        $checkedDialog.className = 'checked-tips-dialog';
        $scrollDownTips.className = 'scroll-down-tips';
      }
    </script>
  </body>
</html>
